# Claw Step Backend Service - 爪步电子宠物陪伴旅行应用后端

## 项目概述
这是"爪步"(Claw Step)电子宠物陪伴旅游应用的NestJS后端服务。该应用通过AI虚拟宠物，将用户的日常步数转化为沉浸式全球旅行体验的情感疗愈应用。

## 技术栈
- **框架**: NestJS
- **语言**: TypeScript
- **数据库**: PostgreSQL (主数据库)
- **ORM**: Prisma
- **认证**: JWT + Passport
- **缓存**: Redis (计划中)
- **部署**: Docker + Docker Compose

## 核心功能
- **用户系统**: 多种登录方式（Google、Apple、邮箱、手机号）
- **宠物系统**: 4个不同的电子宠物选择和互动
- **旅行系统**: 步数转化为旅行体验，城市解锁
- **消息系统**: 宠物来信、AI对话、语音聊天
- **双人旅行**: 邀请好友、旅伴管理
- **用户管理**: 个人资料、Pro订阅、设置中心

## 数据库设计
使用Prisma ORM管理PostgreSQL数据库，包含以下核心表：
- **用户表**: 用户基本信息、认证信息
- **宠物表**: 电子宠物信息
- **城市表**: 全球城市信息和解锁状态
- **步数记录表**: 用户步数数据
- **信件表**: 宠物来信系统
- **聊天记录表**: 用户与宠物的对话
- **双人旅行表**: 旅伴关系管理
- **通知表**: 系统通知
- **Pro订阅表**: 会员订阅管理

## 开发环境
```bash
# 安装依赖
npm install

# 启动开发服务器
npm run start:dev

# 数据库迁移
npx prisma migrate dev

# 生成Prisma客户端
npx prisma generate
```

## 部署说明
- **开发环境**: 使用Docker Compose启动服务
- **生产环境**: 云服务数据库和Redis缓存
- **AI集成**: 集成AI服务进行内容生成

## 项目结构
```
src/
├── modules/           # 功能模块
│   ├── auth/         # 认证模块
│   ├── user/         # 用户模块
│   ├── pet/          # 宠物模块
│   ├── city/         # 城市模块
│   ├── travel/       # 旅行模块
│   ├── message/      # 消息模块
│   └── notification/ # 通知模块
├── libs/             # 共享库
└── main.ts          # 应用入口
```

## 开发规范
- 按功能模块组织代码
- 使用DTO进行数据传输
- 统一的错误处理
- 完整的API文档
- JWT Token认证
- 输入验证和过滤

## 待开发功能
- [ ] 完成基础用户认证系统
- [ ] 实现宠物选择和管理
- [ ] 开发步数记录和转化
- [ ] 实现基础消息系统
- [ ] AI对话功能集成
- [ ] 语音聊天功能
- [ ] 双人旅行系统
