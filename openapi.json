{
  "openapi": "3.0.0",
  "paths": {
    "/api/auth/phone/one-click": {
      "post": {
        "operationId": "AuthController_oneClickLogin",
        "summary": "一键登录（阿里云）",
        "description": "通过阿里云一键登录SDK获取的accessToken进行一键登录，后端自动获取手机号并注册/登录",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OneClickLoginDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/LoginResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "auth"
        ]
      }
    },
    "/api/auth/phone/send-code": {
      "post": {
        "operationId": "AuthController_sendSmsCode",
        "summary": "发送短信验证码",
        "description": "向指定手机号发送短信验证码",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendSmsCodeDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "type": "boolean"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          },
          "429": {
            "description": "发送过于频繁，请稍后再试",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "auth"
        ]
      }
    },
    "/api/auth/phone/code-login": {
      "post": {
        "operationId": "AuthController_phoneCodeLogin",
        "summary": "验证码登录",
        "description": "通过手机号和短信验证码进行登录",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PhoneCodeLoginDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/LoginResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误或验证码错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          },
          "429": {
            "description": "验证码发送过于频繁",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "auth"
        ]
      }
    },
    "/api/auth/refresh": {
      "post": {
        "operationId": "AuthController_refreshToken",
        "summary": "刷新访问令牌",
        "description": "使用有效的JWT令牌刷新获取新的访问令牌",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/RefreshTokenResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "令牌无效或已过期",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "auth"
        ]
      }
    },
    "/api/auth/third-party/douyin": {
      "post": {
        "operationId": "AuthController_douyinLogin",
        "summary": "抖音登录",
        "description": "通过抖音授权token进行登录",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DouyinLoginDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/LoginResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "抖音token验证失败",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "auth"
        ]
      }
    },
    "/api/auth/third-party/apple": {
      "post": {
        "operationId": "AuthController_appleLogin",
        "summary": "Apple登录",
        "description": "通过Apple ID token进行登录",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AppleLoginDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/LoginResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Apple token验证失败",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "auth"
        ]
      }
    },
    "/api/user": {
      "get": {
        "operationId": "UserController_getUser",
        "summary": "获取用户基本信息",
        "description": "获取当前登录用户的基本信息",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/UserProfileResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "user"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/user/profile": {
      "get": {
        "operationId": "UserController_getUserProfile",
        "summary": "获取用户完整资料",
        "description": "获取包括ID、Pro状态、旅行券等完整用户信息",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/UserProfileResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "user"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      },
      "put": {
        "operationId": "UserController_updateUserProfile",
        "summary": "更新用户资料",
        "description": "更新用户头像和昵称，支持部分更新（只传需要更新的字段）",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "nickname": {
                    "type": "string",
                    "description": "昵称",
                    "example": "假装看风景"
                  },
                  "avatar": {
                    "type": "string",
                    "format": "binary",
                    "description": "头像文件"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/UserProfileResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "用户不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "user"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/user/onboarding/complete": {
      "post": {
        "operationId": "UserController_completeOnboarding",
        "summary": "完成初始化流程",
        "description": "用户首次登录后，完成宠物和城市的选择，以及用户昵称的设置",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OnboardingCompleteDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "type": "boolean"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "user"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/user/pet/switch": {
      "post": {
        "operationId": "UserController_switchPet",
        "summary": "切换宠物",
        "description": "用户切换当前使用的宠物",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SwitchPetDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "type": "boolean"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "user"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/user/city/switch": {
      "post": {
        "operationId": "UserController_switchCity",
        "summary": "切换城市",
        "description": "用户切换当前访问的城市",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SwitchCityDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "type": "boolean"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "user"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/upload": {
      "post": {
        "operationId": "UploadController_uploadFile",
        "summary": "上传文件",
        "description": "上传文件到阿里云OSS",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "文件上传",
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/FileUploadDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/UploadResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "201": {
            "description": "文件上传成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "upload"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/agreement/user": {
      "get": {
        "operationId": "AgreementController_getUserAgreement",
        "summary": "获取用户协议",
        "description": "获取用户协议内容",
        "parameters": [
          {
            "name": "language",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgreementResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "agreement"
        ]
      }
    },
    "/api/agreement/privacy": {
      "get": {
        "operationId": "AgreementController_getPrivacyPolicy",
        "summary": "获取隐私政策",
        "description": "获取隐私政策内容",
        "parameters": [
          {
            "name": "language",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgreementResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "agreement"
        ]
      }
    },
    "/api/agreement/mobile-auth": {
      "get": {
        "operationId": "AgreementController_getMobileAuthTerms",
        "summary": "获取移动认证服务条款",
        "description": "获取中国移动认证服务条款内容",
        "parameters": [
          {
            "name": "language",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgreementResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "agreement"
        ]
      }
    },
    "/api/pet": {
      "get": {
        "operationId": "PetController_getAllPets",
        "summary": "获取所有宠物列表",
        "description": "获取系统中所有可用的宠物列表。当 includeSelection=true 时，需要JWT认证，返回选中状态",
        "parameters": [
          {
            "name": "includeSelection",
            "required": false,
            "in": "query",
            "description": "是否包含选中状态（需要JWT认证）",
            "example": false,
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/PetListResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "获取选中状态需要JWT认证",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "pet"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/pet/user/active": {
      "get": {
        "operationId": "PetController_getUserActivePet",
        "summary": "获取用户当前激活的宠物",
        "description": "获取当前用户正在使用的宠物",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/UserPetDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "用户未选择宠物",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "pet"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/pet/user/all": {
      "get": {
        "operationId": "PetController_getUserPets",
        "summary": "获取用户的所有宠物",
        "description": "获取用户选择过的所有宠物列表",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/UserPetListResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "pet"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/pet/profile/complete": {
      "get": {
        "operationId": "PetController_getCompleteProfile",
        "summary": "获取宠物完整档案（推荐）",
        "description": "一次性获取当前激活宠物的完整档案信息（包含简介、统计、成就、梦想）",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/PetCompleteProfileResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "用户未选择宠物",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "pet"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/pet/{id}/profile": {
      "get": {
        "operationId": "PetController_getPetProfile",
        "summary": "获取宠物完整档案",
        "description": "获取宠物的完整档案信息（包含扩展字段：简短描述、详细描述、性格标签、经典台词）",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/PetProfileDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "宠物不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "pet"
        ]
      }
    },
    "/api/pet/{id}/stats": {
      "get": {
        "operationId": "PetController_getPetStats",
        "summary": "获取宠物旅行统计",
        "description": "获取基于当前激活宠物的旅行统计数据（旅行天数、已旅行城市、累计步数、累计里程）",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/PetStatsDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "用户未拥有该宠物",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "pet"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/pet/{id}/achievements": {
      "get": {
        "operationId": "PetController_getAchievements",
        "summary": "获取成就列表",
        "description": "获取成就列表（包含用户进度和状态）",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/AchievementListResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "用户未拥有该宠物",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "pet"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/pet/{id}/dreams": {
      "get": {
        "operationId": "PetController_getDreams",
        "summary": "获取梦想进度列表",
        "description": "获取梦想进度列表（包含当前进度和完成状态）",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/DreamListResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "用户未拥有该宠物",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "pet"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/pet/{id}": {
      "get": {
        "operationId": "PetController_getPetById",
        "summary": "获取宠物详情",
        "description": "根据ID获取宠物详细信息",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/PetDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "宠物不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "pet"
        ]
      }
    },
    "/api/city": {
      "get": {
        "operationId": "CityController_getAllCities",
        "summary": "获取所有城市列表",
        "description": "获取系统中所有可用的城市列表，支持按大洲和解锁状态筛选",
        "parameters": [
          {
            "name": "continentId",
            "required": false,
            "in": "query",
            "description": "大洲ID筛选",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "isUnlocked",
            "required": false,
            "in": "query",
            "description": "是否解锁筛选",
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/CityListResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "city"
        ]
      }
    },
    "/api/city/user/current": {
      "get": {
        "operationId": "CityController_getUserCurrentCity",
        "summary": "获取用户当前访问的城市",
        "description": "获取当前用户最近访问的城市",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/UserCityDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "用户未访问过城市",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "city"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/city/user/all": {
      "get": {
        "operationId": "CityController_getUserCities",
        "summary": "获取用户的所有城市",
        "description": "获取用户访问过的所有城市列表",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/UserCityListResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "city"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/city/continent/list": {
      "get": {
        "operationId": "CityController_getAllContinents",
        "summary": "获取所有大洲",
        "description": "获取所有大洲及其解锁状态",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/ContinentListResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "city"
        ]
      }
    },
    "/api/city/{id}": {
      "get": {
        "operationId": "CityController_getCityById",
        "summary": "获取城市详情",
        "description": "根据ID获取城市详细信息",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/CityDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "城市不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "city"
        ]
      }
    },
    "/api/city/{id}/unlock": {
      "post": {
        "operationId": "CityController_unlockCity",
        "summary": "解锁城市",
        "description": "使用旅行券解锁城市",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "type": "boolean"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "旅行券不足或城市已解锁",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "城市不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "city"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/travel/current": {
      "get": {
        "operationId": "TravelController_getCurrentTravel",
        "summary": "获取当前旅行",
        "description": "获取用户当前正在进行的旅行信息",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/TravelDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "没有正在进行的旅行",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "travel"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/travel/start": {
      "post": {
        "operationId": "TravelController_startTravel",
        "summary": "开始旅行",
        "description": "开始新的旅行（单人/双人）",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StartTravelDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/TravelDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误或已有正在进行的旅行",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "城市不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "travel"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/travel/switch-to-dual": {
      "post": {
        "operationId": "TravelController_switchToDual",
        "summary": "单人旅行切换为双人",
        "description": "将当前单人旅行切换为双人旅行",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SwitchToDualDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/TravelDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误或已经是双人旅行",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "没有正在进行的旅行",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "travel"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/travel/companions": {
      "get": {
        "operationId": "TravelController_getCurrentCompanions",
        "summary": "获取当前旅伴列表",
        "description": "获取当前旅行中的旅伴信息（仅双人旅行有）",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/TravelCompanionsResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "travel"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/travel/sync": {
      "post": {
        "operationId": "TravelController_syncSteps",
        "summary": "同步步数",
        "description": "从前端设备同步步数到服务器",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SyncStepsDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "type": "boolean"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误或没有正在进行的旅行",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "travel"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/travel/statistics": {
      "get": {
        "operationId": "TravelController_getStatistics",
        "summary": "获取旅行统计",
        "description": "获取用户的历史旅行统计信息（整体统计：旅行城市数、所有步数、消耗卡路里）",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/TravelStatisticsDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "travel"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/travel/statistics/cities": {
      "get": {
        "operationId": "TravelController_getCityTravelStatistics",
        "summary": "获取按城市分组的旅行统计",
        "description": "获取用户按城市分组的详细旅行统计信息（每个城市的旅行天数、所有步数、消耗卡路里）",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/CityTravelStatsListResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "travel"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/travel/invitation/generate": {
      "post": {
        "operationId": "TravelController_generateInvitation",
        "summary": "生成邀请码",
        "description": "生成一个邀请码，用于邀请其他用户成为旅伴。可选指定好友ID，将自动发送推送通知。",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/GenerateInvitationResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "travel"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/travel/invitation/validate": {
      "post": {
        "operationId": "TravelController_validateInvitation",
        "summary": "验证邀请码",
        "description": "验证邀请码是否有效，并返回邀请者信息",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ValidateInvitationDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/ValidateInvitationSuccessResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "验证失败",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "travel"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/travel/invitation/accept": {
      "post": {
        "operationId": "TravelController_acceptInvitation",
        "summary": "接受邀请",
        "description": "接受邀请码，建立旅伴关系",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AcceptInvitationDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/AcceptInvitationResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "travel"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/travel/partnerships": {
      "get": {
        "operationId": "TravelController_getPartnerships",
        "summary": "获取旅伴关系列表",
        "description": "获取用户的所有旅伴关系",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/PartnershipsResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "travel"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/travel/partnerships/{id}": {
      "delete": {
        "operationId": "TravelController_unbindPartnership",
        "summary": "解除旅伴关系",
        "description": "解除旅伴关系（需24小时确认）",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/UnbindResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误或有正在进行的旅行",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "旅伴关系不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "travel"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/travel/partnerships/cancel-unbind": {
      "post": {
        "operationId": "TravelController_cancelUnbind",
        "summary": "取消解除请求",
        "description": "取消解除旅伴关系的请求",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CancelUnbindDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/CancelUnbindResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "旅伴关系不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "travel"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/notification/list": {
      "get": {
        "operationId": "NotificationController_getNotifications",
        "summary": "获取通知列表",
        "description": "获取当前用户的通知列表，支持分页",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "页码（从1开始）",
            "example": 1,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "pageSize",
            "required": false,
            "in": "query",
            "description": "每页数量",
            "example": 20,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/NotificationListResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "notification"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/notification/{id}/read": {
      "put": {
        "operationId": "NotificationController_markAsRead",
        "summary": "标记通知为已读",
        "description": "标记指定的通知为已读状态",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "通知ID",
            "example": "uuid-string",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/MarkAsReadResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "通知不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "notification"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/notification/read-all": {
      "put": {
        "operationId": "NotificationController_markAllAsRead",
        "summary": "标记所有通知为已读",
        "description": "将当前用户的所有未读通知标记为已读",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/MarkAsReadResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "notification"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/notification/unread-count": {
      "get": {
        "operationId": "NotificationController_getUnreadCount",
        "summary": "获取未读通知数量",
        "description": "获取当前用户的未读通知数量",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/UnreadCountResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "notification"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/home/summary": {
      "get": {
        "operationId": "HomeController_getHomeSummary",
        "summary": "获取主页聚合信息",
        "description": "获取主页显示所需的所有信息（当前城市、宠物、步数、旅伴等）",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/HomeSummaryResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "home"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/letter": {
      "get": {
        "operationId": "LetterController_getLetters",
        "summary": "获取来信列表",
        "description": "分页获取用户的来信列表，未读优先，按更新时间降序排序",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "页码，默认为1",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "pageSize",
            "required": false,
            "in": "query",
            "description": "每页数量，默认为30",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/LetterListResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "letter"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/letter/status": {
      "get": {
        "operationId": "LetterController_getMailboxStatus",
        "summary": "获取信箱状态",
        "description": "获取未读消息总数及未读消息ID列表，用于轮询检测新消息",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/MailboxStatusResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "letter"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/letter/{id}": {
      "get": {
        "operationId": "LetterController_getLetterDetail",
        "summary": "获取信件详情及模板",
        "description": "获取信件的交互历史和对应的完整模板内容",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/LetterDetailWithTemplateDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "letter"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/letter/{id}/read": {
      "put": {
        "operationId": "LetterController_markAsRead",
        "summary": "标记信件为已读",
        "description": "将指定信件标记为已读",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "type": "boolean"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "letter"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/letter/{id}/history": {
      "put": {
        "operationId": "LetterController_addHistoryItem",
        "summary": "更新信件交互历史",
        "description": "提交新的交互步骤，支持去重（同一templateItemId会更新）",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddHistoryItemDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/LetterDetailWithTemplateDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "letter"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/chat/session": {
      "post": {
        "operationId": "ChatController_createOrGetSession",
        "summary": "创建或获取聊天会话",
        "description": "每个用户和宠物只有一个活跃会话，如果存在则返回，不存在则创建",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSessionDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/CreateSessionResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "chat"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/chat/session/current": {
      "get": {
        "operationId": "ChatController_getCurrentSession",
        "summary": "获取当前活跃会话",
        "description": "获取指定宠物的当前活跃会话",
        "parameters": [
          {
            "name": "petId",
            "required": true,
            "in": "query",
            "description": "宠物ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/ChatSessionDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "会话不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "chat"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/chat/message/text": {
      "post": {
        "operationId": "ChatController_sendTextMessage",
        "summary": "发送文字消息",
        "description": "发送文字消息并获取AI回复",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendTextMessageDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/SendMessageResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "chat"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/chat/message/image": {
      "post": {
        "operationId": "ChatController_sendImageMessage",
        "summary": "发送图片消息",
        "description": "发送图片消息（支持图片+文字）并获取AI回复",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendImageMessageDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/SendMessageResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "chat"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/chat/message/voice": {
      "post": {
        "operationId": "ChatController_sendVoiceMessage",
        "summary": "发送语音消息",
        "description": "发送语音消息并获取AI语音回复",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendVoiceMessageDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/SendMessageResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "chat"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/chat/messages": {
      "get": {
        "operationId": "ChatController_getChatHistory",
        "summary": "获取聊天历史",
        "description": "获取指定宠物的聊天消息历史",
        "parameters": [
          {
            "name": "petId",
            "required": true,
            "in": "query",
            "description": "宠物ID",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "每页数量",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "偏移量",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/ChatHistoryResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "chat"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/chat/session/{id}/end": {
      "put": {
        "operationId": "ChatController_endSession",
        "summary": "结束聊天会话",
        "description": "结束当前活跃的聊天会话",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "会话ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/EndSessionResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "会话不存在或已结束",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "chat"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/chat/sessions": {
      "get": {
        "operationId": "ChatController_getSessions",
        "summary": "获取会话列表",
        "description": "获取用户的所有聊天会话列表",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "每页数量",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "偏移量",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/SessionListResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "chat"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/subscription/plans": {
      "get": {
        "operationId": "SubscriptionController_getSubscriptionPlans",
        "summary": "获取订阅方案列表",
        "description": "获取可用的订阅方案（月费/年费）及其价格信息",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/SubscriptionPlansResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "subscription"
        ]
      }
    },
    "/api/subscription/current": {
      "get": {
        "operationId": "SubscriptionController_getCurrentSubscription",
        "summary": "获取当前用户订阅状态",
        "description": "获取用户当前的Pro订阅状态和详细信息",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/CurrentSubscriptionResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "subscription"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/subscription/subscribe": {
      "post": {
        "operationId": "SubscriptionController_createSubscription",
        "summary": "创建订阅",
        "description": "创建Pro订阅订单（购买Pro版本）",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSubscriptionDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/CreateSubscriptionResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "已有活跃订阅",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "订阅方案不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "subscription"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/subscription/verify-payment": {
      "post": {
        "operationId": "SubscriptionController_verifyPayment",
        "summary": "验证支付",
        "description": "验证Apple/Google内购支付凭证",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VerifyPaymentDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/VerifyPaymentResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "支付凭证验证失败",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "订阅订单不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "subscription"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/subscription/cancel": {
      "put": {
        "operationId": "SubscriptionController_cancelSubscription",
        "summary": "取消订阅",
        "description": "取消订阅（不会立即失效，到期后不再续费）",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/CancelSubscriptionResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "没有找到活跃的订阅",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "subscription"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/subscription/restore": {
      "put": {
        "operationId": "SubscriptionController_restoreSubscription",
        "summary": "恢复订阅",
        "description": "恢复已取消的订阅（重新开启自动续费）",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/CancelSubscriptionResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "没有找到已取消的订阅",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "subscription"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/subscription/history": {
      "get": {
        "operationId": "SubscriptionController_getSubscriptionHistory",
        "summary": "获取订阅历史",
        "description": "获取用户的所有订阅历史记录",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "每页数量",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "偏移量",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/SubscriptionHistoryResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "subscription"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/subscription/statistics": {
      "get": {
        "operationId": "SubscriptionController_getAppStatistics",
        "summary": "获取应用统计信息",
        "description": "获取应用统计信息（用户数、用户评价等）",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/AppStatisticsResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "subscription"
        ]
      }
    },
    "/api/coupon/my": {
      "get": {
        "operationId": "CouponController_getMyCoupons",
        "summary": "获取我的优惠券列表",
        "description": "获取当前用户的所有优惠券列表",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/CouponListResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "coupon"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/coupon/use": {
      "post": {
        "operationId": "CouponController_useCoupon",
        "summary": "使用优惠券",
        "description": "使用优惠券并获取优惠券码（点击使用按钮时调用）",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UseCouponDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/UseCouponResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "优惠券已被使用或已过期",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "优惠券不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "coupon"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/feedback": {
      "post": {
        "operationId": "FeedbackController_createFeedback",
        "summary": "提交意见反馈",
        "description": "提交用户意见反馈，支持文本、联系方式和多张截图",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateFeedbackDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/CreateFeedbackResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponseDto"
                }
              }
            }
          }
        },
        "tags": [
          "feedback"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/feedback/my": {
      "get": {
        "operationId": "FeedbackController_getMyFeedbacks",
        "summary": "获取我的反馈列表",
        "description": "获取当前用户的反馈列表，支持分页",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "页码（从1开始）",
            "example": 1,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "pageSize",
            "required": false,
            "in": "query",
            "description": "每页数量",
            "example": 20,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/FeedbackListResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "feedback"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/friendship/my-friends": {
      "get": {
        "operationId": "FriendshipController_getMyFriends",
        "summary": "获取我的好友列表",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/FriendListResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "好友管理"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/friendship/generate-code": {
      "post": {
        "operationId": "FriendshipController_generateInvitationCode",
        "summary": "生成/重新生成邀请码（需要Pro用户）",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/InvitationCodeResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "好友管理"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/friendship/my-code": {
      "get": {
        "operationId": "FriendshipController_getMyInvitationCode",
        "summary": "获取我的邀请码",
        "parameters": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/InvitationCodeResponseDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "好友管理"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/friendship/validate-code": {
      "post": {
        "operationId": "FriendshipController_validateInvitationCode",
        "summary": "验证邀请码（返回邀请者信息）",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ValidateCodeDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/FriendDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "好友管理"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/friendship/add": {
      "post": {
        "operationId": "FriendshipController_addFriend",
        "summary": "通过邀请码添加好友（需要Pro用户）",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddFriendDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/FriendDto"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "好友管理"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/friendship/{friendshipId}": {
      "delete": {
        "operationId": "FriendshipController_deleteFriend",
        "summary": "删除好友（24小时等待期）",
        "parameters": [
          {
            "name": "friendshipId",
            "required": true,
            "in": "path",
            "description": "好友关系ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "type": "boolean"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "好友管理"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    },
    "/api/friendship/{friendshipId}/cancel-delete": {
      "post": {
        "operationId": "FriendshipController_cancelDeleteFriend",
        "summary": "取消删除好友（24小时内）",
        "parameters": [
          {
            "name": "friendshipId",
            "required": true,
            "in": "path",
            "description": "好友关系ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ResponseDto"
                    },
                    {
                      "properties": {
                        "data": {
                          "type": "boolean"
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        },
        "tags": [
          "好友管理"
        ],
        "security": [
          {
            "JWT-auth": []
          }
        ]
      }
    }
  },
  "info": {
    "title": "Claw Step API",
    "description": "Claw Step 应用后端 API 文档",
    "version": "1.0.0",
    "contact": {}
  },
  "tags": [
    {
      "name": "auth",
      "description": "认证相关接口"
    },
    {
      "name": "user",
      "description": "用户相关接口"
    },
    {
      "name": "pet",
      "description": "宠物相关接口"
    },
    {
      "name": "city",
      "description": "城市相关接口"
    },
    {
      "name": "travel",
      "description": "旅行相关接口"
    },
    {
      "name": "chat",
      "description": "聊天相关接口"
    },
    {
      "name": "notification",
      "description": "通知相关接口"
    }
  ],
  "servers": [],
  "components": {
    "securitySchemes": {
      "JWT-auth": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http",
        "name": "JWT",
        "description": "Enter JWT token",
        "in": "header"
      }
    },
    "schemas": {
      "ResponseDto": {
        "type": "object",
        "properties": {
          "code": {
            "type": "number",
            "description": "状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "提示信息",
            "example": "success"
          },
          "data": {
            "type": "object",
            "description": "响应数据"
          }
        },
        "required": [
          "code",
          "message",
          "data"
        ]
      },
      "LoginResponseDto": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "description": "访问令牌",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "refreshToken": {
            "type": "string",
            "description": "刷新令牌",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "isNew": {
            "type": "boolean",
            "description": "是否为新用户",
            "example": false
          }
        },
        "required": [
          "accessToken",
          "refreshToken",
          "isNew"
        ]
      },
      "OneClickLoginDto": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "description": "移动商SDK返回的accessToken"
          }
        },
        "required": [
          "accessToken"
        ]
      },
      "ErrorResponseDto": {
        "type": "object",
        "properties": {
          "code": {
            "type": "number",
            "description": "状态码",
            "example": 400
          },
          "message": {
            "type": "string",
            "description": "错误信息",
            "example": "请求参数错误"
          }
        },
        "required": [
          "code",
          "message"
        ]
      },
      "SendSmsCodeDto": {
        "type": "object",
        "properties": {
          "phone": {
            "type": "string",
            "description": "手机号",
            "example": "13800138000"
          }
        },
        "required": [
          "phone"
        ]
      },
      "PhoneCodeLoginDto": {
        "type": "object",
        "properties": {
          "phone": {
            "type": "string",
            "description": "手机号",
            "example": "13800138000"
          },
          "code": {
            "type": "string",
            "description": "短信验证码",
            "example": "123456"
          }
        },
        "required": [
          "phone",
          "code"
        ]
      },
      "RefreshTokenResponseDto": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "description": "新的访问令牌",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "refreshToken": {
            "type": "string",
            "description": "新的刷新令牌",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          }
        },
        "required": [
          "accessToken",
          "refreshToken"
        ]
      },
      "RefreshTokenDto": {
        "type": "object",
        "properties": {
          "refreshToken": {
            "type": "string",
            "description": "刷新令牌",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          }
        },
        "required": [
          "refreshToken"
        ]
      },
      "DouyinLoginDto": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "description": "抖音授权accessToken",
            "example": "douyin_access_token_here"
          },
          "openid": {
            "type": "string",
            "description": "抖音用户ID（openid）",
            "example": "douyin_openid_here"
          },
          "nickname": {
            "type": "string",
            "description": "抖音用户昵称",
            "example": "抖音用户"
          },
          "avatar": {
            "type": "string",
            "description": "抖音用户头像URL",
            "example": "https://example.com/avatar.jpg"
          }
        },
        "required": [
          "accessToken"
        ]
      },
      "AppleLoginDto": {
        "type": "object",
        "properties": {
          "identityToken": {
            "type": "string",
            "description": "Apple ID token (JWT)",
            "example": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "userIdentifier": {
            "type": "string",
            "description": "Apple用户标识（user identifier）",
            "example": "apple_user_id_here"
          },
          "email": {
            "type": "string",
            "description": "Apple用户邮箱",
            "example": "user@example.com"
          },
          "fullName": {
            "type": "string",
            "description": "Apple用户全名",
            "example": "John Doe"
          }
        },
        "required": [
          "identityToken"
        ]
      },
      "UserProfileResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "用户ID",
            "example": "uuid-string"
          },
          "nickname": {
            "type": "string",
            "description": "昵称",
            "example": "假装看风景"
          },
          "avatar": {
            "type": "string",
            "description": "头像URL",
            "example": "https://example.com/avatar.jpg"
          },
          "isPro": {
            "type": "boolean",
            "description": "是否为Pro用户",
            "example": false
          },
          "travelTickets": {
            "type": "number",
            "description": "旅行券数量",
            "example": 0
          },
          "language": {
            "type": "string",
            "description": "语言设置",
            "example": "zh-CN"
          },
          "email": {
            "type": "string",
            "description": "邮箱",
            "example": "user@example.com"
          },
          "phone": {
            "type": "string",
            "description": "手机号",
            "example": "13800138000"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "更新时间"
          }
        },
        "required": [
          "id",
          "nickname",
          "isPro",
          "travelTickets",
          "language",
          "createdAt",
          "updatedAt"
        ]
      },
      "OnboardingCompleteDto": {
        "type": "object",
        "properties": {
          "petId": {
            "type": "string",
            "description": "选择的宠物ID",
            "example": "uuid-string"
          },
          "cityId": {
            "type": "string",
            "description": "选择的城市ID",
            "example": "uuid-string"
          },
          "nickname": {
            "type": "string",
            "description": "用户昵称",
            "example": "小明"
          },
          "initialSteps": {
            "type": "number",
            "description": "初始步数",
            "example": 0,
            "default": 0
          }
        },
        "required": [
          "petId",
          "cityId"
        ]
      },
      "SwitchPetDto": {
        "type": "object",
        "properties": {
          "petId": {
            "type": "string",
            "description": "要切换的宠物ID",
            "example": "uuid-string"
          }
        },
        "required": [
          "petId"
        ]
      },
      "SwitchCityDto": {
        "type": "object",
        "properties": {
          "cityId": {
            "type": "string",
            "description": "要切换的城市ID",
            "example": "uuid-string"
          }
        },
        "required": [
          "cityId"
        ]
      },
      "UploadResponseDto": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "description": "文件访问URL"
          }
        },
        "required": [
          "url"
        ]
      },
      "FileUploadDto": {
        "type": "object",
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "description": "要上传的文件"
          }
        },
        "required": [
          "file"
        ]
      },
      "AgreementResponseDto": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "协议标题",
            "example": "用户协议"
          },
          "content": {
            "type": "string",
            "description": "协议内容",
            "example": "欢迎您使用..."
          },
          "language": {
            "type": "string",
            "description": "语言代码",
            "example": "zh_CN"
          },
          "version": {
            "type": "string",
            "description": "版本号",
            "example": "1.0"
          },
          "updatedAt": {
            "type": "string",
            "description": "更新时间",
            "example": "2024-01-01T00:00:00.000Z"
          }
        },
        "required": [
          "title",
          "content",
          "language",
          "version",
          "updatedAt"
        ]
      },
      "PetDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "宠物ID",
            "example": "uuid-string"
          },
          "name": {
            "type": "string",
            "description": "宠物名称",
            "example": "小狐狸"
          },
          "englishName": {
            "type": "string",
            "description": "宠物英文名",
            "example": "Fox"
          },
          "shortDescription": {
            "type": "string",
            "description": "简短描述（用于顶部显示）",
            "example": "爱薅羊毛，也爱犀利点评，每天都会给你一份毒舌版《避雷指南》。"
          },
          "longDescription": {
            "type": "string",
            "description": "详细描述（用于简介Tab）",
            "example": "爱薅羊毛，也爱犀利点评，每天都会给你一份毒舌版《避雷指南》。唯一的小问题是，偶尔需要担心它被店家拉黑。"
          },
          "imageUrl": {
            "type": "string",
            "description": "宠物头像URL",
            "example": "https://example.com/fox.jpg"
          },
          "personalityTags": {
            "description": "性格标签数组",
            "example": [
              "毒舌",
              "爱薅羊毛",
              "机智"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "classicLines": {
            "description": "经典台词数组",
            "example": [
              "\"这味道，不如把我扔进榨汁机。\"",
              "\"这杯咖啡卖三十？这不是拿智商当奶泡打吗？\""
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "isSelected": {
            "type": "boolean",
            "description": "是否已选中（当 includeSelection=true 时返回）",
            "example": true
          }
        },
        "required": [
          "id",
          "name",
          "englishName",
          "imageUrl"
        ]
      },
      "PetListResponseDto": {
        "type": "object",
        "properties": {
          "pets": {
            "description": "宠物列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PetDto"
            }
          },
          "currentPetId": {
            "type": "string",
            "description": "当前选中的宠物ID（当 includeSelection=true 时返回）",
            "example": "uuid-string"
          }
        },
        "required": [
          "pets"
        ]
      },
      "UserPetDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "关系ID",
            "example": "uuid-string"
          },
          "userId": {
            "type": "string",
            "description": "用户ID",
            "example": "uuid-string"
          },
          "petId": {
            "type": "string",
            "description": "宠物ID",
            "example": "uuid-string"
          },
          "isActive": {
            "type": "boolean",
            "description": "是否激活",
            "example": true
          },
          "selectedAt": {
            "format": "date-time",
            "type": "string",
            "description": "选择时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "pet": {
            "description": "宠物信息",
            "allOf": [
              {
                "$ref": "#/components/schemas/PetDto"
              }
            ]
          }
        },
        "required": [
          "id",
          "userId",
          "petId",
          "isActive",
          "selectedAt",
          "pet"
        ]
      },
      "UserPetListResponseDto": {
        "type": "object",
        "properties": {
          "pets": {
            "description": "用户宠物列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserPetDto"
            }
          }
        },
        "required": [
          "pets"
        ]
      },
      "PetProfileDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "宠物ID",
            "example": "uuid-string"
          },
          "name": {
            "type": "string",
            "description": "宠物名称",
            "example": "艾迪"
          },
          "englishName": {
            "type": "string",
            "description": "宠物英文名",
            "example": "Eddie"
          },
          "shortDescription": {
            "type": "string",
            "description": "简短描述（用于顶部显示）",
            "example": "爱薅羊毛，也爱犀利点评，每天都会给你一份毒舌版《避雷指南》。"
          },
          "longDescription": {
            "type": "string",
            "description": "详细描述（用于简介Tab）",
            "example": "爱薅羊毛，也爱犀利点评，每天都会给你一份毒舌版《避雷指南》。唯一的小问题是，偶尔需要担心它被店家拉黑。"
          },
          "imageUrl": {
            "type": "string",
            "description": "宠物头像URL",
            "example": "https://example.com/fox.jpg"
          },
          "personalityTags": {
            "description": "性格标签数组",
            "example": [
              "毒舌",
              "爱薅羊毛",
              "机智"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "classicLines": {
            "description": "经典台词数组",
            "example": [
              "\"这味道，不如把我扔进榨汁机。\"",
              "\"这杯咖啡卖三十？这不是拿智商当奶泡打吗？\""
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "更新时间",
            "example": "2024-01-01T00:00:00.000Z"
          }
        },
        "required": [
          "id",
          "name",
          "englishName",
          "imageUrl",
          "personalityTags",
          "classicLines",
          "createdAt",
          "updatedAt"
        ]
      },
      "PetStatsDto": {
        "type": "object",
        "properties": {
          "travelDays": {
            "type": "number",
            "description": "旅行天数",
            "example": 87
          },
          "visitedCities": {
            "type": "number",
            "description": "已旅行城市数量",
            "example": 15
          },
          "totalSteps": {
            "type": "number",
            "description": "累计步数",
            "example": 50000
          },
          "totalDistance": {
            "type": "number",
            "description": "累计旅行里程（公里）",
            "example": 35
          }
        },
        "required": [
          "travelDays",
          "visitedCities",
          "totalSteps",
          "totalDistance"
        ]
      },
      "AchievementDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "成就ID",
            "example": "uuid-string"
          },
          "name": {
            "type": "string",
            "description": "成就名称",
            "example": "日行万步"
          },
          "description": {
            "type": "string",
            "description": "成就描述",
            "example": "一天内行走10000步"
          },
          "iconUrl": {
            "type": "string",
            "description": "成就图标URL",
            "example": "https://example.com/icon.png"
          },
          "status": {
            "type": "string",
            "description": "成就状态",
            "example": "unlocked",
            "enum": [
              "locked",
              "unlocked",
              "in_progress"
            ]
          },
          "currentProgress": {
            "type": "number",
            "description": "当前进度值",
            "example": 10000
          },
          "targetValue": {
            "type": "number",
            "description": "目标值",
            "example": 10000
          },
          "unlockedAt": {
            "format": "date-time",
            "type": "string",
            "description": "解锁时间",
            "example": "2024-01-01T00:00:00.000Z"
          }
        },
        "required": [
          "id",
          "name",
          "status"
        ]
      },
      "AchievementListResponseDto": {
        "type": "object",
        "properties": {
          "achievements": {
            "description": "成就列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AchievementDto"
            }
          }
        },
        "required": [
          "achievements"
        ]
      },
      "DreamDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "梦想ID",
            "example": "uuid-string"
          },
          "name": {
            "type": "string",
            "description": "梦想名称",
            "example": "编写《环球薅羊毛圣经》"
          },
          "description": {
            "type": "string",
            "description": "梦想描述",
            "example": "正在为成为世界首席省钱顾问而努力！"
          },
          "icon": {
            "type": "string",
            "description": "图标（emoji或URL）",
            "example": "📖"
          },
          "currentProgress": {
            "type": "number",
            "description": "当前进度值",
            "example": 12
          },
          "targetValue": {
            "type": "number",
            "description": "目标值",
            "example": 100
          },
          "progressPercent": {
            "type": "number",
            "description": "进度百分比",
            "example": 0.12
          },
          "status": {
            "type": "string",
            "description": "状态",
            "example": "in_progress",
            "enum": [
              "in_progress",
              "completed"
            ]
          },
          "completedAt": {
            "format": "date-time",
            "type": "string",
            "description": "完成时间",
            "example": "2024-01-01T00:00:00.000Z"
          }
        },
        "required": [
          "id",
          "name",
          "currentProgress",
          "targetValue",
          "progressPercent",
          "status"
        ]
      },
      "DreamListResponseDto": {
        "type": "object",
        "properties": {
          "dreams": {
            "description": "梦想列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DreamDto"
            }
          }
        },
        "required": [
          "dreams"
        ]
      },
      "PetCompleteProfileResponseDto": {
        "type": "object",
        "properties": {
          "pet": {
            "description": "宠物信息",
            "allOf": [
              {
                "$ref": "#/components/schemas/PetProfileDto"
              }
            ]
          },
          "stats": {
            "description": "旅行统计",
            "allOf": [
              {
                "$ref": "#/components/schemas/PetStatsDto"
              }
            ]
          },
          "achievements": {
            "description": "成就列表",
            "allOf": [
              {
                "$ref": "#/components/schemas/AchievementListResponseDto"
              }
            ]
          },
          "dreams": {
            "description": "梦想列表",
            "allOf": [
              {
                "$ref": "#/components/schemas/DreamListResponseDto"
              }
            ]
          }
        },
        "required": [
          "pet",
          "stats",
          "achievements",
          "dreams"
        ]
      },
      "ContinentDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "大洲ID",
            "example": "uuid-string"
          },
          "name": {
            "type": "string",
            "description": "大洲名称",
            "example": "亚洲"
          },
          "englishName": {
            "type": "string",
            "description": "大洲英文名",
            "example": "Asia"
          },
          "imageUrl": {
            "type": "string",
            "description": "大洲图片URL",
            "example": "https://example.com/asia.jpg"
          },
          "order": {
            "type": "number",
            "description": "排序",
            "example": 1
          },
          "status": {
            "type": "string",
            "description": "大洲状态",
            "example": "unlocked",
            "enum": [
              "unlocked",
              "locked",
              "comingSoon"
            ]
          },
          "unlockedCitiesCount": {
            "type": "number",
            "description": "已解锁城市数量",
            "example": 4
          },
          "totalCitiesCount": {
            "type": "number",
            "description": "总城市数量",
            "example": 10
          }
        },
        "required": [
          "id",
          "name",
          "englishName",
          "imageUrl",
          "order",
          "status",
          "unlockedCitiesCount",
          "totalCitiesCount"
        ]
      },
      "CityDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "城市ID",
            "example": "uuid-string"
          },
          "name": {
            "type": "string",
            "description": "城市名称",
            "example": "成都"
          },
          "englishName": {
            "type": "string",
            "description": "城市英文名",
            "example": "Chengdu"
          },
          "continentId": {
            "type": "string",
            "description": "所属大洲ID",
            "example": "uuid-string"
          },
          "country": {
            "type": "string",
            "description": "所属国家",
            "example": "China"
          },
          "imageUrl": {
            "type": "string",
            "description": "城市图片URL",
            "example": "https://example.com/chengdu.jpg"
          },
          "isUnlocked": {
            "type": "boolean",
            "description": "是否已解锁",
            "example": true
          },
          "unlockCondition": {
            "type": "string",
            "description": "解锁条件",
            "example": "达到1000步"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "更新时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "continent": {
            "description": "所属大洲信息",
            "allOf": [
              {
                "$ref": "#/components/schemas/ContinentDto"
              }
            ]
          }
        },
        "required": [
          "id",
          "name",
          "englishName",
          "continentId",
          "country",
          "imageUrl",
          "isUnlocked",
          "createdAt",
          "updatedAt"
        ]
      },
      "CityListResponseDto": {
        "type": "object",
        "properties": {
          "cities": {
            "description": "城市列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CityDto"
            }
          }
        },
        "required": [
          "cities"
        ]
      },
      "UserCityDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "关系ID",
            "example": "uuid-string"
          },
          "userId": {
            "type": "string",
            "description": "用户ID",
            "example": "uuid-string"
          },
          "cityId": {
            "type": "string",
            "description": "城市ID",
            "example": "uuid-string"
          },
          "visitCount": {
            "type": "number",
            "description": "访问次数",
            "example": 1
          },
          "totalSteps": {
            "type": "number",
            "description": "总步数",
            "example": 0
          },
          "totalCalories": {
            "type": "number",
            "description": "总卡路里",
            "example": 0
          },
          "firstVisitAt": {
            "format": "date-time",
            "type": "string",
            "description": "首次访问时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "lastVisitAt": {
            "format": "date-time",
            "type": "string",
            "description": "最后访问时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "更新时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "city": {
            "description": "城市信息",
            "allOf": [
              {
                "$ref": "#/components/schemas/CityDto"
              }
            ]
          }
        },
        "required": [
          "id",
          "userId",
          "cityId",
          "visitCount",
          "totalSteps",
          "totalCalories",
          "createdAt",
          "updatedAt",
          "city"
        ]
      },
      "UserCityListResponseDto": {
        "type": "object",
        "properties": {
          "cities": {
            "description": "用户城市列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserCityDto"
            }
          }
        },
        "required": [
          "cities"
        ]
      },
      "ContinentListResponseDto": {
        "type": "object",
        "properties": {
          "continents": {
            "description": "大洲列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ContinentDto"
            }
          }
        },
        "required": [
          "continents"
        ]
      },
      "CityVo": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "城市ID",
            "example": "uuid-string"
          },
          "name": {
            "type": "string",
            "description": "城市名称",
            "example": "成都"
          },
          "englishName": {
            "type": "string",
            "description": "城市英文名",
            "example": "Chengdu"
          },
          "imageUrl": {
            "type": "string",
            "description": "城市图片URL",
            "example": "https://example.com/chengdu.jpg"
          }
        },
        "required": [
          "id",
          "name",
          "englishName",
          "imageUrl"
        ]
      },
      "PartnerVo": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "旅伴ID",
            "example": "uuid-string"
          },
          "nickname": {
            "type": "string",
            "description": "旅伴昵称",
            "example": "小明"
          },
          "avatar": {
            "type": "string",
            "description": "旅伴头像",
            "example": "https://example.com/avatar.jpg"
          }
        },
        "required": [
          "id",
          "nickname",
          "avatar"
        ]
      },
      "TravelDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "旅行ID",
            "example": "uuid-string"
          },
          "userId": {
            "type": "string",
            "description": "用户ID",
            "example": "uuid-string"
          },
          "cityId": {
            "type": "string",
            "description": "城市ID",
            "example": "uuid-string"
          },
          "type": {
            "type": "string",
            "description": "旅行类型",
            "example": "single",
            "enum": [
              "single",
              "dual"
            ]
          },
          "partnerId": {
            "type": "string",
            "description": "旅伴ID",
            "example": "uuid-string"
          },
          "partnershipId": {
            "type": "string",
            "description": "旅伴关系ID",
            "example": "uuid-string"
          },
          "status": {
            "type": "string",
            "description": "旅行状态",
            "example": "active",
            "enum": [
              "active",
              "completed",
              "paused"
            ]
          },
          "startDate": {
            "format": "date-time",
            "type": "string",
            "description": "开始时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "endDate": {
            "format": "date-time",
            "type": "string",
            "description": "结束时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "completedAt": {
            "format": "date-time",
            "type": "string",
            "description": "完成时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "totalSteps": {
            "type": "number",
            "description": "总步数",
            "example": 5000
          },
          "totalCalories": {
            "type": "number",
            "description": "总卡路里",
            "example": 200
          },
          "days": {
            "type": "number",
            "description": "已旅行天数",
            "example": 3
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "更新时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "city": {
            "description": "城市信息",
            "allOf": [
              {
                "$ref": "#/components/schemas/CityVo"
              }
            ]
          },
          "partner": {
            "description": "旅伴信息",
            "allOf": [
              {
                "$ref": "#/components/schemas/PartnerVo"
              }
            ]
          }
        },
        "required": [
          "id",
          "userId",
          "cityId",
          "type",
          "status",
          "startDate",
          "totalSteps",
          "totalCalories",
          "days",
          "createdAt",
          "updatedAt"
        ]
      },
      "StartTravelDto": {
        "type": "object",
        "properties": {
          "cityId": {
            "type": "string",
            "description": "城市ID",
            "example": "uuid-string"
          },
          "type": {
            "type": "string",
            "description": "旅行类型",
            "enum": [
              "single",
              "dual"
            ],
            "example": "single"
          },
          "partnerId": {
            "type": "string",
            "description": "旅伴ID（双人旅行时必需）",
            "example": "uuid-string"
          },
          "partnershipId": {
            "type": "string",
            "description": "旅伴关系ID（双人旅行时必需）",
            "example": "uuid-string"
          }
        },
        "required": [
          "cityId",
          "type"
        ]
      },
      "SwitchToDualDto": {
        "type": "object",
        "properties": {
          "partnerId": {
            "type": "string",
            "description": "旅伴ID",
            "example": "uuid-string"
          },
          "partnershipId": {
            "type": "string",
            "description": "旅伴关系ID",
            "example": "uuid-string"
          }
        },
        "required": [
          "partnerId",
          "partnershipId"
        ]
      },
      "TravelCompanionDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "旅伴用户ID",
            "example": "uuid-string"
          },
          "nickname": {
            "type": "string",
            "description": "旅伴昵称",
            "example": "旅伴昵称"
          },
          "avatar": {
            "type": "string",
            "description": "旅伴头像",
            "example": "https://example.com/avatar.jpg"
          }
        },
        "required": [
          "id",
          "nickname",
          "avatar"
        ]
      },
      "TravelCompanionsResponseDto": {
        "type": "object",
        "properties": {
          "companions": {
            "description": "旅伴列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TravelCompanionDto"
            }
          }
        },
        "required": [
          "companions"
        ]
      },
      "SyncStepsDto": {
        "type": "object",
        "properties": {
          "steps": {
            "type": "number",
            "description": "步数",
            "example": 3500
          },
          "calories": {
            "type": "number",
            "description": "卡路里",
            "example": 120
          },
          "date": {
            "type": "string",
            "description": "日期（ISO格式），默认今天",
            "example": "2024-01-01T00:00:00.000Z"
          }
        },
        "required": [
          "steps"
        ]
      },
      "TravelStatisticsDto": {
        "type": "object",
        "properties": {
          "totalCities": {
            "type": "number",
            "description": "旅行城市数",
            "example": 2
          },
          "totalSteps": {
            "type": "number",
            "description": "所有步数",
            "example": 43558
          },
          "totalCalories": {
            "type": "number",
            "description": "消耗卡路里",
            "example": 5848
          }
        },
        "required": [
          "totalCities",
          "totalSteps",
          "totalCalories"
        ]
      },
      "CityTravelStatsDto": {
        "type": "object",
        "properties": {
          "cityId": {
            "type": "string",
            "description": "城市ID",
            "example": "uuid-string"
          },
          "cityName": {
            "type": "string",
            "description": "城市名称",
            "example": "成都"
          },
          "cityImageUrl": {
            "type": "string",
            "description": "城市图片URL",
            "example": "https://example.com/chengdu.jpg"
          },
          "travelDays": {
            "type": "number",
            "description": "旅行天数",
            "example": 7
          },
          "totalSteps": {
            "type": "number",
            "description": "所有步数",
            "example": 43456
          },
          "totalCalories": {
            "type": "number",
            "description": "消耗卡路里",
            "example": 3453
          }
        },
        "required": [
          "cityId",
          "cityName",
          "cityImageUrl",
          "travelDays",
          "totalSteps",
          "totalCalories"
        ]
      },
      "CityTravelStatsListResponseDto": {
        "type": "object",
        "properties": {
          "cities": {
            "description": "城市统计列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CityTravelStatsDto"
            }
          }
        },
        "required": [
          "cities"
        ]
      },
      "GenerateInvitationResponseDto": {
        "type": "object",
        "properties": {
          "invitationCode": {
            "type": "string",
            "description": "邀请码",
            "example": "ABC12345"
          },
          "expiresAt": {
            "type": "string",
            "description": "过期时间",
            "example": "2024-01-08T00:00:00.000Z"
          },
          "qrCodeUrl": {
            "type": "string",
            "description": "二维码URL",
            "example": "https://example.com/qr/ABC12345"
          }
        },
        "required": [
          "invitationCode",
          "expiresAt"
        ]
      },
      "ValidateInvitationSuccessResponseDto": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "是否成功",
            "example": true
          },
          "data": {
            "type": "object",
            "description": "邀请信息"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "ValidateInvitationDto": {
        "type": "object",
        "properties": {
          "invitationCode": {
            "type": "string",
            "description": "邀请码",
            "example": "ABC12345"
          }
        },
        "required": [
          "invitationCode"
        ]
      },
      "AcceptInvitationResponseDto": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "是否成功",
            "example": true
          },
          "data": {
            "type": "object",
            "description": "旅伴关系信息"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "AcceptInvitationDto": {
        "type": "object",
        "properties": {
          "invitationCode": {
            "type": "string",
            "description": "邀请码",
            "example": "ABC12345"
          }
        },
        "required": [
          "invitationCode"
        ]
      },
      "PartnershipDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "旅伴关系ID",
            "example": "uuid-string"
          },
          "partner": {
            "type": "object",
            "description": "旅伴信息"
          },
          "status": {
            "type": "string",
            "description": "关系状态",
            "example": "accepted"
          },
          "isActiveTravel": {
            "type": "boolean",
            "description": "是否有正在进行的旅行",
            "example": false
          },
          "createdAt": {
            "type": "string",
            "description": "创建时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "acceptedAt": {
            "type": "string",
            "description": "接受时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "unbindExpiresAt": {
            "type": "string",
            "description": "解除请求过期时间",
            "example": "2024-01-02T00:00:00.000Z"
          }
        },
        "required": [
          "id",
          "partner",
          "status",
          "isActiveTravel",
          "createdAt"
        ]
      },
      "PartnershipsResponseDto": {
        "type": "object",
        "properties": {
          "partnerships": {
            "description": "旅伴关系列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PartnershipDto"
            }
          }
        },
        "required": [
          "partnerships"
        ]
      },
      "UnbindResponseDto": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "是否成功",
            "example": true
          },
          "data": {
            "type": "object",
            "description": "解除请求信息"
          }
        },
        "required": [
          "success",
          "data"
        ]
      },
      "CancelUnbindResponseDto": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "是否成功",
            "example": true
          }
        },
        "required": [
          "success"
        ]
      },
      "CancelUnbindDto": {
        "type": "object",
        "properties": {
          "partnershipId": {
            "type": "string",
            "description": "解除请求ID",
            "example": "uuid-string"
          }
        },
        "required": [
          "partnershipId"
        ]
      },
      "NotificationDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "通知ID",
            "example": "uuid-string"
          },
          "title": {
            "type": "string",
            "description": "通知标题",
            "example": "成为好友"
          },
          "content": {
            "type": "string",
            "description": "通知内容",
            "example": "假装看风景 已经接受了您的好友邀请,可以双人旅行啦!"
          },
          "type": {
            "type": "string",
            "description": "通知类型",
            "enum": [
              "friend_request",
              "travel_invitation",
              "activity_promotion",
              "system"
            ],
            "example": "friend_request"
          },
          "avatar": {
            "type": "string",
            "description": "通知头像URL",
            "example": "https://example.com/avatar.jpg"
          },
          "imageUrl": {
            "type": "string",
            "description": "通知图片URL",
            "example": "https://example.com/image.jpg"
          },
          "actionLink": {
            "type": "string",
            "description": "行动链接",
            "example": "点击立即参与"
          },
          "isRead": {
            "type": "boolean",
            "description": "是否已读",
            "example": false
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "更新时间",
            "example": "2024-01-01T00:00:00.000Z"
          }
        },
        "required": [
          "id",
          "title",
          "content",
          "type",
          "isRead",
          "createdAt",
          "updatedAt"
        ]
      },
      "NotificationListResponseDto": {
        "type": "object",
        "properties": {
          "notifications": {
            "description": "通知列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/NotificationDto"
            }
          },
          "unreadCount": {
            "type": "number",
            "description": "未读数量",
            "example": 5
          },
          "total": {
            "type": "number",
            "description": "总数",
            "example": 20
          }
        },
        "required": [
          "notifications",
          "unreadCount",
          "total"
        ]
      },
      "MarkAsReadResponseDto": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "是否成功",
            "example": true
          },
          "message": {
            "type": "string",
            "description": "消息",
            "example": "标记已读成功"
          }
        },
        "required": [
          "success",
          "message"
        ]
      },
      "UnreadCountResponseDto": {
        "type": "object",
        "properties": {
          "count": {
            "type": "number",
            "description": "未读数量",
            "example": 5
          }
        },
        "required": [
          "count"
        ]
      },
      "CurrentCityDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "城市ID",
            "example": "uuid-string"
          },
          "name": {
            "type": "string",
            "description": "城市名称",
            "example": "成都"
          },
          "englishName": {
            "type": "string",
            "description": "城市英文名",
            "example": "Chengdu"
          }
        },
        "required": [
          "id",
          "name",
          "englishName"
        ]
      },
      "CurrentPetDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "宠物ID",
            "example": "uuid-string"
          },
          "name": {
            "type": "string",
            "description": "宠物名称",
            "example": "小狐狸"
          }
        },
        "required": [
          "id",
          "name"
        ]
      },
      "TodayStepsSummaryDto": {
        "type": "object",
        "properties": {
          "steps": {
            "type": "number",
            "description": "今日步数",
            "example": 3500
          },
          "goal": {
            "type": "number",
            "description": "步数目标",
            "example": 4000
          },
          "calories": {
            "type": "number",
            "description": "今日卡路里",
            "example": 120
          }
        },
        "required": [
          "steps",
          "goal",
          "calories"
        ]
      },
      "CompanionSummaryDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "旅伴用户ID",
            "example": "uuid-string"
          },
          "nickname": {
            "type": "string",
            "description": "旅伴昵称",
            "example": "旅伴昵称"
          },
          "avatar": {
            "type": "string",
            "description": "旅伴头像",
            "example": "https://example.com/avatar.jpg"
          }
        },
        "required": [
          "id",
          "nickname",
          "avatar"
        ]
      },
      "HomeSummaryResponseDto": {
        "type": "object",
        "properties": {
          "currentCity": {
            "description": "当前城市信息",
            "allOf": [
              {
                "$ref": "#/components/schemas/CurrentCityDto"
              }
            ]
          },
          "currentPet": {
            "description": "当前激活的宠物",
            "allOf": [
              {
                "$ref": "#/components/schemas/CurrentPetDto"
              }
            ]
          },
          "todaySteps": {
            "description": "今日步数统计",
            "allOf": [
              {
                "$ref": "#/components/schemas/TodayStepsSummaryDto"
              }
            ]
          },
          "companions": {
            "description": "旅伴列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CompanionSummaryDto"
            }
          },
          "user": {
            "type": "object",
            "description": "用户基本信息"
          }
        },
        "required": [
          "todaySteps",
          "companions",
          "user"
        ]
      },
      "LetterListItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "信件ID"
          },
          "title": {
            "type": "string",
            "description": "标题（取第一条消息的前20个字）"
          },
          "author": {
            "type": "string",
            "description": "发件人（宠物名）"
          },
          "authorAvatar": {
            "type": "string",
            "description": "发件人头像（宠物头像）"
          },
          "type": {
            "type": "string",
            "description": "信件类型（aiSong/aiDrawing/aiHoroscope）"
          },
          "isRead": {
            "type": "boolean",
            "description": "是否已读"
          },
          "isCompleted": {
            "type": "boolean",
            "description": "是否已完结"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "更新时间"
          }
        },
        "required": [
          "id",
          "title",
          "author",
          "authorAvatar",
          "type",
          "isRead",
          "isCompleted",
          "createdAt",
          "updatedAt"
        ]
      },
      "LetterListResponseDto": {
        "type": "object",
        "properties": {
          "letters": {
            "description": "信件列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/LetterListItemDto"
            }
          },
          "total": {
            "type": "number",
            "description": "总数"
          },
          "page": {
            "type": "number",
            "description": "当前页码"
          },
          "pageSize": {
            "type": "number",
            "description": "每页数量"
          }
        },
        "required": [
          "letters",
          "total",
          "page",
          "pageSize"
        ]
      },
      "MailboxStatusResponseDto": {
        "type": "object",
        "properties": {
          "unreadCount": {
            "type": "number",
            "description": "未读消息总数"
          },
          "unreadIds": {
            "description": "未读消息ID列表",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "unreadCount",
          "unreadIds"
        ]
      },
      "LetterDetailWithTemplateDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "信件ID"
          },
          "type": {
            "type": "string",
            "description": "信件类型"
          },
          "isCompleted": {
            "type": "boolean",
            "description": "是否已完结"
          },
          "history": {
            "description": "交互历史（仅记录顺序和ID）",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间"
          },
          "templateContent": {
            "description": "完整模板内容（用于前端渲染）",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "id",
          "type",
          "isCompleted",
          "history",
          "createdAt",
          "templateContent"
        ]
      },
      "AddHistoryItemDto": {
        "type": "object",
        "properties": {
          "templateItemId": {
            "type": "string",
            "description": "关联的模版项ID"
          },
          "role": {
            "type": "string",
            "description": "角色",
            "enum": [
              "user",
              "pet"
            ]
          },
          "text": {
            "type": "string",
            "description": "用户输入的文本"
          },
          "mediaType": {
            "type": "string",
            "description": "媒体类型",
            "enum": [
              "text",
              "audio",
              "video",
              "image",
              "none"
            ]
          },
          "mediaUrls": {
            "description": "媒体链接列表",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "templateItemId"
        ]
      },
      "CreateSessionResponseDto": {
        "type": "object",
        "properties": {
          "sessionId": {
            "type": "string",
            "description": "会话ID",
            "example": "uuid-string"
          },
          "startTime": {
            "format": "date-time",
            "type": "string",
            "description": "开始时间"
          },
          "petId": {
            "type": "string",
            "description": "宠物ID",
            "example": "uuid-string"
          }
        },
        "required": [
          "sessionId",
          "startTime",
          "petId"
        ]
      },
      "CreateSessionDto": {
        "type": "object",
        "properties": {
          "petId": {
            "type": "string",
            "description": "宠物ID",
            "example": "uuid-string"
          }
        },
        "required": [
          "petId"
        ]
      },
      "ChatSessionDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "会话ID",
            "example": "uuid-string"
          },
          "userId": {
            "type": "string",
            "description": "用户ID",
            "example": "uuid-string"
          },
          "petId": {
            "type": "string",
            "description": "宠物ID",
            "example": "uuid-string"
          },
          "startTime": {
            "format": "date-time",
            "type": "string",
            "description": "开始时间"
          },
          "endTime": {
            "format": "date-time",
            "type": "string",
            "description": "结束时间"
          },
          "duration": {
            "type": "number",
            "description": "会话时长（秒）",
            "example": 3600
          },
          "messageCount": {
            "type": "number",
            "description": "消息总数",
            "example": 50
          },
          "userMessageCount": {
            "type": "number",
            "description": "用户消息数",
            "example": 25
          },
          "petMessageCount": {
            "type": "number",
            "description": "宠物消息数",
            "example": 25
          },
          "isActive": {
            "type": "boolean",
            "description": "是否活跃",
            "example": true
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间"
          }
        },
        "required": [
          "id",
          "userId",
          "petId",
          "startTime",
          "duration",
          "messageCount",
          "userMessageCount",
          "petMessageCount",
          "isActive",
          "createdAt"
        ]
      },
      "ChatMessageDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "消息ID",
            "example": "uuid-string"
          },
          "sessionId": {
            "type": "string",
            "description": "会话ID"
          },
          "type": {
            "type": "string",
            "description": "消息类型",
            "enum": [
              "userText",
              "userImage",
              "userImageText",
              "userVoice",
              "petText"
            ],
            "example": "userText"
          },
          "content": {
            "type": "string",
            "description": "消息内容",
            "example": "你好，今天天气怎么样？"
          },
          "mediaUrls": {
            "description": "媒体URLs",
            "example": [],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "mediaType": {
            "type": "string",
            "description": "媒体类型",
            "example": "none"
          },
          "duration": {
            "type": "number",
            "description": "语音时长（秒）",
            "example": 5
          },
          "isFromUser": {
            "type": "boolean",
            "description": "是否来自用户",
            "example": true
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间"
          }
        },
        "required": [
          "id",
          "type",
          "content",
          "mediaUrls",
          "mediaType",
          "isFromUser",
          "createdAt"
        ]
      },
      "SendMessageResponseDto": {
        "type": "object",
        "properties": {
          "userMessage": {
            "description": "用户消息",
            "allOf": [
              {
                "$ref": "#/components/schemas/ChatMessageDto"
              }
            ]
          },
          "petMessage": {
            "description": "宠物回复消息",
            "allOf": [
              {
                "$ref": "#/components/schemas/ChatMessageDto"
              }
            ]
          },
          "sessionId": {
            "type": "string",
            "description": "会话ID",
            "example": "uuid-string"
          },
          "petVoiceUrl": {
            "type": "string",
            "description": "宠物语音URL（如果是语音消息）"
          }
        },
        "required": [
          "userMessage",
          "petMessage"
        ]
      },
      "SendTextMessageDto": {
        "type": "object",
        "properties": {
          "sessionId": {
            "type": "string",
            "description": "会话ID（可选，如果不提供会自动创建或获取）",
            "example": "uuid-string"
          },
          "petId": {
            "type": "string",
            "description": "宠物ID",
            "example": "uuid-string"
          },
          "content": {
            "type": "string",
            "description": "消息内容",
            "example": "你好，今天天气怎么样？"
          }
        },
        "required": [
          "petId",
          "content"
        ]
      },
      "SendImageMessageDto": {
        "type": "object",
        "properties": {
          "sessionId": {
            "type": "string",
            "description": "会话ID（可选）",
            "example": "uuid-string"
          },
          "petId": {
            "type": "string",
            "description": "宠物ID",
            "example": "uuid-string"
          },
          "imageUrl": {
            "type": "string",
            "description": "图片URL",
            "example": "https://example.com/image.jpg"
          },
          "content": {
            "type": "string",
            "description": "文字内容（可选）",
            "example": "看看这张照片"
          }
        },
        "required": [
          "petId",
          "imageUrl"
        ]
      },
      "SendVoiceMessageDto": {
        "type": "object",
        "properties": {
          "sessionId": {
            "type": "string",
            "description": "会话ID（可选）",
            "example": "uuid-string"
          },
          "petId": {
            "type": "string",
            "description": "宠物ID",
            "example": "uuid-string"
          },
          "voiceUrl": {
            "type": "string",
            "description": "语音文件URL",
            "example": "https://example.com/voice.mp3"
          },
          "duration": {
            "type": "number",
            "description": "语音时长（秒）",
            "example": 5
          }
        },
        "required": [
          "petId",
          "voiceUrl",
          "duration"
        ]
      },
      "ChatHistoryResponseDto": {
        "type": "object",
        "properties": {
          "messages": {
            "description": "消息列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ChatMessageDto"
            }
          },
          "total": {
            "type": "number",
            "description": "总数量",
            "example": 50
          },
          "sessionId": {
            "type": "string",
            "description": "会话ID"
          }
        },
        "required": [
          "messages",
          "total"
        ]
      },
      "EndSessionResponseDto": {
        "type": "object",
        "properties": {
          "sessionId": {
            "type": "string",
            "description": "会话ID",
            "example": "uuid-string"
          },
          "duration": {
            "type": "number",
            "description": "会话时长（秒）",
            "example": 3600
          },
          "messageCount": {
            "type": "number",
            "description": "消息总数",
            "example": 50
          }
        },
        "required": [
          "sessionId",
          "duration",
          "messageCount"
        ]
      },
      "SessionListResponseDto": {
        "type": "object",
        "properties": {
          "sessions": {
            "description": "会话列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ChatSessionDto"
            }
          },
          "total": {
            "type": "number",
            "description": "总数量",
            "example": 10
          }
        },
        "required": [
          "sessions",
          "total"
        ]
      },
      "SubscriptionPlanDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "方案ID",
            "example": "monthly"
          },
          "planType": {
            "type": "string",
            "description": "方案类型",
            "enum": [
              "monthly",
              "yearly"
            ],
            "example": "monthly"
          },
          "name": {
            "type": "string",
            "description": "方案名称",
            "example": "连续每月"
          },
          "description": {
            "type": "string",
            "description": "方案描述",
            "example": "一笔一笔"
          },
          "price": {
            "type": "number",
            "description": "价格",
            "example": 36
          },
          "originalPrice": {
            "type": "number",
            "description": "原价",
            "example": 432
          },
          "discount": {
            "type": "number",
            "description": "折扣百分比",
            "example": 35
          },
          "duration": {
            "type": "number",
            "description": "订阅时长（天数）",
            "example": 30
          },
          "currency": {
            "type": "string",
            "description": "货币",
            "example": "CNY"
          },
          "isActive": {
            "type": "boolean",
            "description": "是否激活",
            "example": true
          }
        },
        "required": [
          "id",
          "planType",
          "name",
          "description",
          "price",
          "duration",
          "currency",
          "isActive"
        ]
      },
      "SubscriptionPlansResponseDto": {
        "type": "object",
        "properties": {
          "plans": {
            "description": "订阅方案列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SubscriptionPlanDto"
            }
          }
        },
        "required": [
          "plans"
        ]
      },
      "SubscriptionDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "订阅ID",
            "example": "uuid-string"
          },
          "planType": {
            "type": "string",
            "description": "方案类型",
            "enum": [
              "monthly",
              "yearly"
            ],
            "example": "yearly"
          },
          "status": {
            "type": "string",
            "description": "订阅状态",
            "enum": [
              "active",
              "expired",
              "cancelled",
              "pending"
            ],
            "example": "active"
          },
          "price": {
            "type": "number",
            "description": "价格",
            "example": 288
          },
          "originalPrice": {
            "type": "number",
            "description": "原价",
            "example": 432
          },
          "discount": {
            "type": "number",
            "description": "折扣百分比",
            "example": 35
          },
          "startDate": {
            "format": "date-time",
            "type": "string",
            "description": "开始时间"
          },
          "endDate": {
            "format": "date-time",
            "type": "string",
            "description": "结束时间"
          },
          "cancelledAt": {
            "format": "date-time",
            "type": "string",
            "description": "取消时间"
          },
          "autoRenew": {
            "type": "boolean",
            "description": "是否自动续费",
            "example": true
          },
          "remainingDays": {
            "type": "number",
            "description": "剩余天数",
            "example": 30
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间"
          }
        },
        "required": [
          "id",
          "planType",
          "status",
          "price",
          "startDate",
          "endDate",
          "autoRenew",
          "createdAt"
        ]
      },
      "CurrentSubscriptionResponseDto": {
        "type": "object",
        "properties": {
          "isPro": {
            "type": "boolean",
            "description": "是否为Pro用户",
            "example": true
          },
          "subscription": {
            "description": "订阅信息",
            "allOf": [
              {
                "$ref": "#/components/schemas/SubscriptionDto"
              }
            ]
          }
        },
        "required": [
          "isPro"
        ]
      },
      "CreateSubscriptionResponseDto": {
        "type": "object",
        "properties": {
          "orderId": {
            "type": "string",
            "description": "订单ID",
            "example": "uuid-string"
          },
          "subscription": {
            "description": "订阅信息",
            "allOf": [
              {
                "$ref": "#/components/schemas/SubscriptionDto"
              }
            ]
          },
          "paymentUrl": {
            "type": "string",
            "description": "支付链接（第三方支付）"
          }
        },
        "required": [
          "orderId",
          "subscription"
        ]
      },
      "CreateSubscriptionDto": {
        "type": "object",
        "properties": {
          "planType": {
            "type": "string",
            "description": "订阅方案类型",
            "enum": [
              "monthly",
              "yearly"
            ],
            "example": "yearly"
          },
          "paymentMethod": {
            "type": "string",
            "description": "支付方式",
            "enum": [
              "apple",
              "google",
              "alipay",
              "wechat"
            ],
            "example": "apple"
          },
          "receipt": {
            "type": "string",
            "description": "支付凭证（Apple/Google内购）",
            "example": "receipt_string"
          }
        },
        "required": [
          "planType"
        ]
      },
      "VerifyPaymentResponseDto": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "是否成功",
            "example": true
          },
          "subscription": {
            "description": "订阅信息",
            "allOf": [
              {
                "$ref": "#/components/schemas/SubscriptionDto"
              }
            ]
          }
        },
        "required": [
          "success",
          "subscription"
        ]
      },
      "VerifyPaymentDto": {
        "type": "object",
        "properties": {
          "orderId": {
            "type": "string",
            "description": "订单ID",
            "example": "uuid-string"
          },
          "receipt": {
            "type": "string",
            "description": "支付凭证",
            "example": "receipt_string"
          },
          "platform": {
            "type": "string",
            "description": "支付平台",
            "enum": [
              "apple",
              "google"
            ],
            "example": "apple"
          }
        },
        "required": [
          "orderId",
          "receipt",
          "platform"
        ]
      },
      "CancelSubscriptionResponseDto": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "是否成功",
            "example": true
          },
          "subscription": {
            "description": "订阅信息",
            "allOf": [
              {
                "$ref": "#/components/schemas/SubscriptionDto"
              }
            ]
          }
        },
        "required": [
          "success",
          "subscription"
        ]
      },
      "SubscriptionHistoryResponseDto": {
        "type": "object",
        "properties": {
          "subscriptions": {
            "description": "订阅列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SubscriptionDto"
            }
          },
          "total": {
            "type": "number",
            "description": "总数量",
            "example": 10
          }
        },
        "required": [
          "subscriptions",
          "total"
        ]
      },
      "AppStatisticsResponseDto": {
        "type": "object",
        "properties": {
          "totalUsers": {
            "type": "number",
            "description": "总用户数",
            "example": 200000
          },
          "reviews": {
            "description": "用户评价列表",
            "type": "array",
            "items": {
              "type": "object"
            }
          }
        },
        "required": [
          "totalUsers",
          "reviews"
        ]
      },
      "CouponDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "优惠券ID",
            "example": "uuid-string"
          },
          "title": {
            "type": "string",
            "description": "优惠券标题",
            "example": "瑞幸咖啡免费券"
          },
          "imageUrl": {
            "type": "string",
            "description": "优惠券图片URL",
            "example": "https://example.com/coupon.jpg"
          },
          "description": {
            "type": "string",
            "description": "优惠券描述"
          },
          "validUntil": {
            "format": "date-time",
            "type": "string",
            "description": "有效期",
            "example": "2026-10-31T23:59:59.000Z"
          },
          "status": {
            "type": "string",
            "description": "优惠券状态",
            "enum": [
              "unused",
              "used",
              "expired"
            ],
            "example": "unused"
          },
          "usedAt": {
            "format": "date-time",
            "type": "string",
            "description": "使用时间"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间",
            "example": "2024-01-01T00:00:00.000Z"
          }
        },
        "required": [
          "id",
          "title",
          "validUntil",
          "status",
          "createdAt"
        ]
      },
      "CouponListResponseDto": {
        "type": "object",
        "properties": {
          "coupons": {
            "description": "优惠券列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CouponDto"
            }
          }
        },
        "required": [
          "coupons"
        ]
      },
      "UseCouponResponseDto": {
        "type": "object",
        "properties": {
          "couponCode": {
            "type": "string",
            "description": "优惠券码",
            "example": "LUCKIN2024ABC123"
          },
          "title": {
            "type": "string",
            "description": "优惠券标题",
            "example": "瑞幸咖啡免费券"
          },
          "imageUrl": {
            "type": "string",
            "description": "优惠券图片URL"
          }
        },
        "required": [
          "couponCode",
          "title"
        ]
      },
      "UseCouponDto": {
        "type": "object",
        "properties": {
          "userCouponId": {
            "type": "string",
            "description": "用户优惠券ID",
            "example": "uuid-string"
          }
        },
        "required": [
          "userCouponId"
        ]
      },
      "CreateFeedbackResponseDto": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "是否成功",
            "example": true
          },
          "feedbackId": {
            "type": "string",
            "description": "反馈ID",
            "example": "uuid-string"
          },
          "message": {
            "type": "string",
            "description": "消息",
            "example": "反馈提交成功，我们会尽快处理！"
          }
        },
        "required": [
          "success",
          "feedbackId",
          "message"
        ]
      },
      "CreateFeedbackDto": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "description": "反馈内容",
            "example": "您有任何建议或意见,欢迎反馈给我们,我们会尽快答复您!",
            "maxLength": 400
          },
          "contact": {
            "type": "string",
            "description": "联系方式（邮箱或手机）",
            "example": "user@example.com"
          },
          "imageUrls": {
            "description": "图片URL数组（支持多张截图）",
            "example": [
              "https://example.com/image1.jpg"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "content"
        ]
      },
      "FeedbackDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "反馈ID",
            "example": "uuid-string"
          },
          "content": {
            "type": "string",
            "description": "反馈内容",
            "example": "您有任何建议或意见,欢迎反馈给我们,我们会尽快答复您!"
          },
          "contact": {
            "type": "string",
            "description": "联系方式",
            "example": "user@example.com"
          },
          "imageUrls": {
            "description": "图片URL数组",
            "example": [
              "https://example.com/image1.jpg"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "status": {
            "type": "string",
            "description": "反馈状态",
            "enum": [
              "pending",
              "reviewed",
              "resolved"
            ],
            "example": "pending"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "创建时间",
            "example": "2024-01-01T00:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "更新时间",
            "example": "2024-01-01T00:00:00.000Z"
          }
        },
        "required": [
          "id",
          "content",
          "status",
          "createdAt",
          "updatedAt"
        ]
      },
      "FeedbackListResponseDto": {
        "type": "object",
        "properties": {
          "feedbacks": {
            "description": "反馈列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FeedbackDto"
            }
          }
        },
        "required": [
          "feedbacks"
        ]
      },
      "FriendDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "好友用户ID"
          },
          "nickname": {
            "type": "string",
            "description": "好友昵称"
          },
          "avatar": {
            "type": "string",
            "description": "好友头像"
          },
          "friendshipId": {
            "type": "string",
            "description": "好友关系ID（用于删除操作）"
          },
          "friendSince": {
            "format": "date-time",
            "type": "string",
            "description": "成为好友的时间"
          },
          "status": {
            "type": "string",
            "description": "好友关系状态"
          },
          "deleteRequestedAt": {
            "format": "date-time",
            "type": "string",
            "description": "删除请求时间"
          },
          "deleteExpiresAt": {
            "format": "date-time",
            "type": "string",
            "description": "删除请求过期时间"
          }
        },
        "required": [
          "id",
          "nickname",
          "friendshipId",
          "friendSince"
        ]
      },
      "FriendListResponseDto": {
        "type": "object",
        "properties": {
          "friends": {
            "description": "好友列表",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FriendDto"
            }
          }
        },
        "required": [
          "friends"
        ]
      },
      "InvitationCodeResponseDto": {
        "type": "object",
        "properties": {
          "invitationCode": {
            "type": "string",
            "description": "邀请码"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "邀请码创建时间"
          }
        },
        "required": [
          "invitationCode",
          "createdAt"
        ]
      },
      "ValidateCodeDto": {
        "type": "object",
        "properties": {
          "invitationCode": {
            "type": "string",
            "description": "好友邀请码（8位字符）",
            "example": "ABC12345"
          }
        },
        "required": [
          "invitationCode"
        ]
      },
      "AddFriendDto": {
        "type": "object",
        "properties": {
          "invitationCode": {
            "type": "string",
            "description": "好友邀请码（8位字符）",
            "example": "ABC12345"
          }
        },
        "required": [
          "invitationCode"
        ]
      }
    }
  }
}